<!DOCTYPE html>
<html>
  <head>
    <title>AGAR SOLO LOGIN</title>
    <link rel="icon" href="/TemplateData/favicon.ico" type="image/x-icon" />
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        var currentURL = window.location.href;
        var startIndex;
        var startIndex2;
        var endindex;
        var message;
        var Iserror = "false";
        var IsTwitter = "false";
        var IsFlickr = "false";
        var Type = currentURL
          .substring(
            currentURL.indexOf("state=") + "state=".length,
            currentURL.indexOf("-TheColors")
          )
          .toString();
        console.log(Type);
        switch (Type) {
          case "Google":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Github":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Twitch":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "discord":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&expires_in");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "tiktok":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "bitbucket":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Gitlab":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Microsoft":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "zalo":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "wordpress":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&expires_in");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "amazon":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "twitter":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            // endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex);
            IsTwitter = "true";
            break;
          case "VKontakte":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "tumblr":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "linkedln":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "dropbox":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "line":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "kakaotalk":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "yahoo":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "dribbble":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "vimeo":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "asana":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "spotify":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "slack":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "reddit":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL
              .substring(startIndex)
              .toString()
              .replace("#_", "");
            break;
          case "notion":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Adobe":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Pinterest":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "miro":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "webex":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "cisco":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "capsule":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "xero":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "mailchimp":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            message = currentURL.substring(startIndex);
            break;
          case "imgur":
            startIndex =
              currentURL.indexOf("&account_username=") +
              "&account_username=".length;
            endindex = currentURL.indexOf("&account_id");
            message =
              currentURL.substring(startIndex, endindex) +
              "," +
              currentURL.substring(endindex + "&account_id=".length);
            break;
          case "atlassian":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            message = currentURL.substring(startIndex);
            break;
          default:
            if (
              currentURL.includes("oauth_token") &&
              currentURL.includes("oauth_verifier")
            ) {
              IsFlickr = "true";
              startIndex =
                currentURL.indexOf("oauth_verifier=") +
                "oauth_verifier=".length;
              startIndex2 =
                currentURL.indexOf("oauth_token=") + "oauth_token=".length;
              endIndex = currentURL.indexOf("&oauth_verifier");
              message =
                currentURL.substring(startIndex2, endIndex) +
                "," +
                currentURL.substring(startIndex);
            } else {
              Iserror = "true";
            }
            break;
        }
        if (Iserror == "false" && IsTwitter == "false" && IsFlickr == "false") {
          window.opener.postMessage("(" + Type + ")" + message, "*");
          window.close();
        } else if (IsTwitter == "true") {
          const channel = new BroadcastChannel("myChannel");
          channel.postMessage(decodeURIComponent(message));
          window.close();
        } else if (IsFlickr == "true") {
          console.log("login flickr");
          window.opener.postMessage("(" + "flickr" + ")" + message, "*");
          window.close();
        } else {
          console.log("not found state");
        }
      });
    </script>
  </head>
  <body></body>
</html>
