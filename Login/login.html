<!DOCTYPE html>
<html>
  <head>
    <title>AGAR SOLO LOGIN</title>
    <link rel="icon" href="/TemplateData/favicon.ico" type="image/x-icon" />
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        var currentURL = window.location.href;
        var startIndex;
        var endindex;
        var message;
        var Iserror = "false";
        var IsTwitter = "false";
        var Type = currentURL
          .substring(
            currentURL.indexOf("state=") + "state=".length,
            currentURL.indexOf("-TheColors")
          )
          .toString();
        console.log(Type);
        switch (Type) {
          case "Google":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Github":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Twitch":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "discord":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&expires_in");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "tiktok":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "bitbucket":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Gitlab":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "Microsoft":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "zalo":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "wordpress":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&expires_in");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "amazon":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&scope");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "twitter":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            IsTwitter = "true";
            break;
          case "VKontakte":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "tumblr":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "linkedln":
            startIndex = currentURL.indexOf("code=") + "code=".length;
            endindex = currentURL.indexOf("&state");
            message = currentURL.substring(startIndex, endindex);
            break;
          case "dropbox":
            startIndex =
              currentURL.indexOf("access_token=") + "access_token=".length;
            endindex = currentURL.indexOf("&token_type");
            message = currentURL.substring(startIndex, endindex);
            break;
          default:
            Iserror = "true";
            break;
        }
        if (Iserror == "false" && IsTwitter == "false") {
          window.opener.postMessage("(" + Type + ")" + message, "*");
          window.close();
        } else if (IsTwitter == "true") {
          const channel = new BroadcastChannel("myChannel");
          channel.postMessage(decodeURIComponent(message));
        //  window.close();
        } else {
          console.log("not found state");
        }
      });
    </script>
  </head>
  <body></body>
</html>
