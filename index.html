<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script
      type="text/javascript"
      src="https://cdn.applixir.com/applixir.sdk3.0m.js"
    ></script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8832461201977627"
      crossorigin="anonymous"
    ></script>
    <meta name="google-adsense-account" content="ca-pub-8832461201977627" />
    <script type="text/javascript">
      var _iub = _iub || [];
      _iub.csConfiguration = {
        askConsentAtCookiePolicyUpdate: false,
        enableLgpd: false,
        enableUspr: false,
        floatingPreferencesButtonDisplay: "bottom-right",
        lang: "en",
        perPurposeConsent: true,
        siteId: 3253051,
        usprApplies: true,
        whitelabel: false,
        cookiePolicyId: 53491756,
        banner: {
          acceptButtonDisplay: true,
          closeButtonDisplay: false,
          customizeButtonDisplay: true,
          explicitWithdrawal: true,
          listPurposes: true,
          position: "float-bottom-center",
          rejectButtonDisplay: true,
          showPurposesToggles: true,
        },
      };
    </script>

    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AGAR SOLO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="AGAR SOLO is a multiplayer action game where players try to eat other players and grow their own cells. Play for free now!"
    />
    <meta
      name="keywords"
      content="AGAR SOLO,agar solo, thecolors, thecolors agar, agar color, AGAR,agar, action, game, cells, free"
    />
    <meta name="author" content="AGAR SOLO Team" />
    <link rel="icon" href="TemplateData/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="TemplateData/style.css" />
    <link rel="stylesheet" href="TemplateData/loading.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
  </head>
  <body>
    <div id="applixir_vanishing_div" hidden>
      <iframe id="applixir_parent" allow="autoplay"></iframe>
    </div>
    <input type="button" value="press to invoke" onclick="watchit()" />
    <script type="text/javascript">
      function adStatusCallback(status) {
        console.log("Applixir status: " + status);
        if (status == "ad-blocker") {
          instance.SendMessage("logged", "adblocker");
        } else if (status == "ads-unavailable") {
          instance.SendMessage("logged", "noadsavailable");
        } else if (status == "fb-started" || status == "ad-started") {
          instance.SendMessage("logged", "adwatching");
        } else if (status == "ad-rewarded") {
          instance.SendMessage("logged", "adreward");
        }
      }
      function generateUUID() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
          /[xy]/g,
          function (c) {
            var r = (Math.random() * 16) | 0,
              v = c === "x" ? r : (r & 0x3) | 0x8;
            return v.toString(16);
          }
        );
      }
      var options = {
        // see online documentation for additional informaiton
        zoneId: 2050, // required: the zone ID from the "Games" page
        accountId: 7691, // optional: your account ID (required for RMS)
        gameId: 8202, // optional: the ID for this game from the "Games"
        dMode: 1, // 0 for no MD5 checksum, 1 for MD5 checksum (recommended)
        fallback: 1, // 0 for no fallbacks, 1 will show fallback ads when ads-unavailable
        verbosity: 0,
        endMsg: 1,
        maxAdt: 31,
        btnDelay: 31,
        vSize: "800x600",
        userId: generateUUID(), // required: UUID value for current customer (required for targeted ads - UUID4 recommended) // optional: custom value for RMS - use to provide additional reward information
        adStatusCb: adStatusCallback,
        bgColor: "pink",
      };

      function watchit() {
        invokeApplixirVideoUnit(options);
      }
    </script>

    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8832461201977627"
      crossorigin="anonymous"
    ></script>

    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas"></canvas>

      <div id="unity-loading-bar">
        <div class="tetrominos">
          <div class="tetromino box1"></div>
          <div class="tetromino box2"></div>
          <div class="tetromino box3"></div>
          <div class="tetromino box4"></div>
        </div>
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div id="unity-warning"></div>
      <div id="unity-footer">
        <!-- <div id="unity-fullscreen-button"></div> -->
      </div>
    </div>
    <script>
      function t() {
        var url =
          "https://login.squarespace.com/api/1/login/oauth/provider/authorize?client_id=0bH8BbLhUnjpHNeX7aGmFIvkGvnLFLFT&redirect_uri=https://agar.id.vn/Login/login.html&scope=website.inventory,website.orders&state=squarespace-TheColors";
        var width = 600;
        var height = 600;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height) / 2;
        space = window.open(
          url,
          "EmbeddedPopup",
          "width=" +
            width +
            ",height=" +
            height +
            ",left=" +
            left +
            ",top=" +
            top
        );
      }
      function uploadImageFromUser(loai) {
        loai = UTF8ToString(loai);
        if (loai == "upload") {
          const fileInput = document.createElement("input");
          fileInput.type = "file";
          fileInput.accept = ".jpg,.png";
          fileInput.style.display = "none";

          fileInput.onchange = function (event) {
            instance.SendMessage("logged", "loaduploadIMG");
            const file = event.target.files[0];

            const formData = new FormData();
            formData.append("file", file);

            axios
              .post(
                "https://api.cloudinary.com/v1_1/dv0dagszd/image/upload",
                formData,
                {
                  headers: {
                    "Content-Type": "multipart/form-data",
                  },
                  params: {
                    upload_preset: "ml_default",
                  },
                  crossdomain: true,
                }
              )
              .then(function (response) {
                const imageUrl = response.data.secure_url;
                console.log("Image uploaded to " + imageUrl);
                instance.SendMessage(
                  "logged",
                  "getFilePath",
                  imageUrl.toString()
                );
              })
              .catch(function (error) {
                alert(
                  "The selected file has an incorrect format. Only .png, .jpg, and .jpeg formats are allowed"
                );
                instance.SendMessage("Main Camera", "tatuser");
              });
          };

          fileInput.click();
        } else {
          const imgUrl = loai;
          const formData = new FormData();
          formData.append("file", imgUrl);

          axios
            .post(
              "https://api.cloudinary.com/v1_1/dv0dagszd/image/upload",
              formData,
              {
                headers: {
                  "Content-Type": "multipart/form-data",
                },
                params: {
                  upload_preset: "ml_default",
                },
                crossdomain: true,
              }
            )
            .then(function (response) {
              const imageUrl = response.data.secure_url;
              instance.SendMessage("logged", "vanlaload", imageUrl.toString());
              console.log("Image uploaded to " + imageUrl);
            })
            .catch(function (error) {
              console.error("Upload failed:", error);
            });
        }
      }

      var embeddedPopup;
      function openEmbeddedPopup() {
        var url =
          "https://id.twitch.tv/oauth2/authorize?response_type=token&client_id=qdt8a9lzfgfswr1485wn9y1d9m06bc&redirect_uri=https://agar.id.vn/Login/login.html&scope=channel%3Amanage%3Apolls+channel%3Aread%3Apolls+user%3Aread%3Aemail&state=Twitch-TheColors";
        var width = 600;
        var height = 600;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height) / 2;

        embeddedPopup = window.open(
          url,
          "EmbeddedPopup",
          "width=" +
            width +
            ",height=" +
            height +
            ",left=" +
            left +
            ",top=" +
            top
        );
      }

      var poplinked;
      const urltwitter = new URL(
        "https://twitter.nguyenchibinh113.workers.dev"
      );
      function openbitbucketLoginPopup(dame) {
        dame = UTF8ToString(dame);
        if (dame == "discord") {
          var url =
            "https://discord.com/api/oauth2/authorize?client_id=1141729765145989192&redirect_uri=https%3A%2F%2Fagar.id.vn%2FLogin%2Flogin.html&response_type=token&scope=identify%20guilds.join&state=discord-TheColors";
          var width = 600;
          var height = 800;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          cailon = window.open(
            url,
            "cailon",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "bit") {
          var url =
            "https://bitbucket.org/site/oauth2/authorize?client_id=yPupH3DqDxTxUDs5bg&response_type=token&state=bitbucket-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          poplinked = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "drop") {
          var url =
            "https://www.dropbox.com/oauth2/authorize?response_type=token&client_id=rbcqdjry5cgsx4w&redirect_uri=https://agar.id.vn/Login/login.html&state=dropbox-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          dropbox = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "yahoo") {
          var url =
            "https://api.login.yahoo.com/oauth2/request_auth?client_id=dj0yJmk9MXpNbzdNNDVLV1loJmQ9WVdrOWIwOUhVV1pwWnpNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTQ2&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&state=yahoo-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          hoo = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "mic") {
          var url =
            "https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize?client_id=ff45ad8b-84d3-4ba5-830d-542164adab5a&response_type=code&redirect_uri=https://agar.id.vn/Login/login.html&response_mode=query&scope=https://graph.microsoft.com/mail.read%20User.Read%20Contacts.Read%20Contacts.ReadWrite&state=Microsoft-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          mic = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "zalo") {
          var url =
            "https://oauth.zaloapp.com/v4/permission?app_id=285314313720190236&redirect_uri=https://agar.id.vn/Login/login.html&state=zalo-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          zalo = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "amazon") {
          var url =
            "https://www.amazon.com/ap/oa?client_id=amzn1.application-oa2-client.3514ff94f77246459a1984a1b28b29f8&scope=profile&response_type=code&redirect_uri=https://agar.id.vn/Login/login.html&state=amazon-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          amazon = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "tiktok") {
          var url =
            "https://www.tiktok.com/v2/auth/authorize/?client_key=aw0m7c3fg961md4q&response_type=code&scope=user.info.basic&redirect_uri=https://agar.id.vn/Login/login.html&state=tiktok-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          tiktok = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "linkedln") {
          var url =
            "https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=77on8t1ryw0h84&redirect_uri=https://agar.id.vn/Login/login.html&state=linkedln-TheColors&scope=openid%20profile%20w_member_social%20email";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          linkedln = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "spotify") {
          var url =
            "https://accounts.spotify.com/authorize?client_id=4536657c10884954b83a55df2c6a265c&response_type=token&redirect_uri=https://agar.id.vn/Login/login.html&state=spotify-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          spotify = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "wordpress") {
          var url =
            "https://public-api.wordpress.com/oauth2/authorize?client_id=90179&redirect_uri=https://agar.id.vn/Login/login.html&response_type=token&state=wordpress-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          wordpress = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "slack") {
          var url =
            "https://slack.com/openid/connect/authorize?client_id=5850488718596.5850498155444&scope=openid+profile&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&state=slack-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          slack = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "notion") {
          var url =
            "https://api.notion.com/v1/oauth/authorize?client_id=d2a6b35c-3182-433c-93d1-25a09ebd7276&response_type=code&owner=user&redirect_uri=https%3A%2F%2Fagar.id.vn%2FLogin%2Flogin.html&state=notion-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          notion = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "line") {
          var url =
            "https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=2000654210&redirect_uri=https://agar.id.vn/Login/login.html&state=line-TheColors&scope=openid%20profile";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          line = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "dribbble") {
          var url =
            "https://dribbble.com/oauth/authorize?client_id=7200632133043a01a7a0ec63a01b75957e2febbeb003c7c005517433c783e2ee&redirect_uri=https://agar.id.vn/Login/login.html&scope=public&response_type=code&state=dribbble-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          drip = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "vimeo") {
          var url =
            "https://api.vimeo.com/oauth/authorize?client_id=6e11db9bc0a0e4278f9f7f8a0d5700a5bd33fd40&response_type=token&redirect_uri=https://agar.id.vn/Login/login.html&state=vimeo-TheColors&scope=public+private";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          vimeo = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "asana") {
          var url =
            "https://app.asana.com/-/oauth_authorize?response_type=code&client_id=1205447228205559&redirect_uri=https://agar.id.vn/Login/login.html&state=asana-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          asana = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "telegram") {
          var url =
            "https://oauth.telegram.org/auth?bot_id=6310878234&origin=https://agar.id.vn&request_access=write";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          insta = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "twitter") {
          var charset =
            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";
          var verifier = "";
          for (var i = 0; i < 32; i++) {
            var randomIndex = Math.floor(Math.random() * charset.length);
            verifier += charset.charAt(randomIndex);
          }
          urltwitter.searchParams.set("veri", verifier);
          var encoder = new TextEncoder();
          var data = encoder.encode(verifier);
          window.crypto.subtle
            .digest("SHA-256", data)
            .then(function (hashedCode) {
              var bytes = new Uint8Array(hashedCode);
              var base64 = btoa(String.fromCharCode.apply(null, bytes));
              var base64Url = base64
                .replace(/\+/g, "-")
                .replace(/\//g, "_")
                .replace(/=+$/, "");
              var base64UrlEncoded = base64Url;
              var url =
                "https://twitter.com/i/oauth2/authorize?response_type=code&client_id=YzNFTU1MZVp4emo1ZFByekVYa1k6MTpjaQ&redirect_uri=https://agar.id.vn/Login/login.html&scope=users.read+tweet.read&code_challenge=" +
                base64UrlEncoded +
                "&code_challenge_method=S256&state=twitter-TheColors";
              var width = 600;
              var height = 600;
              var left = (screen.width - width) / 2;
              var top = (screen.height - height) / 2;
              twitter = window.open(
                url,
                "EmbeddedPopup",
                "width=" +
                  width +
                  ",height=" +
                  height +
                  ",left=" +
                  left +
                  ",top=" +
                  top
              );
            })
            .catch(function (error) {
              console.log(error);
            });
        } else if (dame == "tumblr") {
          var url =
            "https://www.tumblr.com/oauth2/authorize/?client_id=for9e5uubwTSM59CfRKiJbLKXfjtdv2v07sOHECvp4bwTxGstm&response_type=code&state=tumblr-TheColors&redirect_uri=https://agar.id.vn/.Login/login.html&scope=basic";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          tumblr = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "google") {
          var url =
            "https://accounts.google.com/o/oauth2/v2/auth?client_id=167091452221-bdb3ilangbm0tmj77ofmd10fum3gocfi.apps.googleusercontent.com&redirect_uri=https://agar.id.vn/Login/login.html&response_type=token&scope=https://www.googleapis.com/auth/userinfo.profile&state=Google-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          googlene = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "flickr") {
          const consumerKey = "698eed3be339b3b34e0cbafa51206b69";
          const consumerSecret = "2998c0adc3e47067";
          const timestamp = Math.floor(Date.now() / 1000);
          const nonce =
            Math.random().toString(36).substring(2) + Date.now().toString(36);
          const requestUrl =
            "https://www.flickr.com/services/oauth/request_token";
          const httpMethod = "GET";
          const params =
            "oauth_callback=" +
            encodeURIComponent("https://agar.id.vn/Login/login.html") +
            "&oauth_consumer_key=" +
            encodeURIComponent(consumerKey) +
            "&oauth_nonce=" +
            encodeURIComponent(nonce) +
            "&oauth_signature_method=HMAC-SHA1" +
            "&oauth_timestamp=" +
            encodeURIComponent(timestamp) +
            "&oauth_version=1.0";
          const baseString =
            httpMethod +
            "&" +
            encodeURIComponent(requestUrl) +
            "&" +
            encodeURIComponent(params);
          let signature = CryptoJS.HmacSHA1(baseString, consumerSecret + "&");
          signature = CryptoJS.enc.Base64.stringify(signature);
          const oauthUrl =
            requestUrl +
            "?" +
            params +
            "&oauth_signature=" +
            encodeURIComponent(signature);
          const r = new URL("https://flickr.nguyenchibinh113.workers.dev");
          r.searchParams.set("url", oauthUrl);

          fetch(r)
            .then((response) => response.text())
            .then((data) => {
              data = data.replace(/"/g, "");
              const token = data.substring(
                data.indexOf("oauth_token=") + "oauth_token=".length,
                data.lastIndexOf("&")
              );
              secrettoken = data.substring(
                data.indexOf("oauth_token_secret=") +
                  "oauth_token_secret=".length
              );
              var urllogin =
                "https://www.flickr.com/services/oauth/authorize?oauth_token=" +
                token +
                "&state=flickr-TheColors";
              var width = 600;
              var height = 600;
              var left = (screen.width - width) / 2;
              var top = (screen.height - height) / 2;
              flickr = window.open(
                urllogin,
                "EmbeddedPopup",
                "width=" +
                  width +
                  ",height=" +
                  height +
                  ",left=" +
                  left +
                  ",top=" +
                  top
              );
            })
            .catch((error) => {
              console.log("Error:", error);
            });
        } else if (dame == "VK") {
          var url =
            "https://oauth.vk.com/authorize?client_id=51750601&display=page&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&v=5.131&state=VKontakte-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          vk = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "adobe") {
          var url =
            "https://ims-na1.adobelogin.com/ims/authorize/v2?client_id=f4e8dc6f579b48ad823515b7a12f5309&redirect_uri=https://agar.id.vn/Login/login.html&scope=openid+profile&response_type=code&state=Adobe-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          adobe = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "pin") {
          var url =
            "https://www.pinterest.com/oauth/?response_type=code&redirect_uri=https://agar.id.vn/Login/login.html&client_id=1490815&scope=user_accounts:read&state=Pinterest-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          pinter = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "kakao") {
          var url =
            "https://kauth.kakao.com/oauth/authorize/?client_id=7d8c067dbfb60b6a6646c7fd0d405d67&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&scope=profile_nickname+openid+profile_image&state=kakaotalk-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          kakao = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "instagram") {
          var url =
            "https://api.instagram.com/oauth/authorize?client_id=249145720880196&redirect_uri=https://agar.id.vn/Login/logininstagram.html&scope=user_profile&response_type=code";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          insta = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "reddit") {
          var url =
            "https://www.reddit.com/api/v1/authorize?client_id=iqXaDvmAAt_fybb3Ith5ow&response_type=code&redirect_uri=https://agar.id.vn/Login/login.html&duration=permanent&scope=identity&state=reddit-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          red = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "webex") {
          var url =
            "https://webexapis.com/v1/authorize?client_id=C6ea780eec6cbabe642168261af5924511db030af419eaea4b8483d99c60169eb&response_type=token&redirect_uri=https%3A%2F%2Fagar.id.vn%2FLogin%2Flogin.html&scope=spark%3Akms%20spark%3Apeople_read%20spark%3Apeople_write%20spark-admin%3Apeople_read&state=webex-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          bex = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "cisco") {
          var url =
            "https://id.cisco.com/oauth2/default/v1/authorize?client_id=j7a7939kpv245ysnydvpwdx8&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&state=cisco-TheColors&scope=openid+profile+offline_access";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          cisco = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "capsule") {
          var url =
            "https://api.capsulecrm.com/oauth/authorise?client_id=14qiasym25dl5&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&state=capsule-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          capsule = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "xero") {
          var url =
            "https://login.xero.com/identity/connect/authorize?response_type=code&client_id=A47B6134E5B54A44A8A3FBF1E6F7446A&redirect_uri=https://agar.id.vn/Login/login.html&scope=openid+profile&state=xero-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          xero = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "miro") {
          var url =
            "https://miro.com/oauth/authorize?response_type=code&client_id=3458764564614105500&redirect_uri=https://agar.id.vn/Login/login.html&state=miro-TheColors&scope=identity:read";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          miro = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "mailchimp") {
          var url =
            "https://login.mailchimp.com/oauth2/authorize?client_id=186739299653&response_type=code&redirect_uri=https://agar.id.vn/Login/login.html&state=mailchimp-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          mail = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "imgur") {
          var url =
            "https://api.imgur.com/oauth2/authorize?response_type=token&client_id=3dbc2393e013e62&state=imgur-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          imgur = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "atlassian") {
          var url =
            "https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=JWvVCpxtmpgOoquauyjCrz1LBOHGsmVC&scope=read%3Ame%20read%3Aaccount&redirect_uri=https://agar.id.vn/Login/login.html&state=atlassian-TheColors&response_type=code&prompt=consent";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          atlassian = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "yandex") {
          var url =
            "https://oauth.yandex.com/authorize?response_type=token&client_id=5918541828114d1b9b79ce4b80f099e7&redirect_uri=https://agar.id.vn/Login/login.html&scope=login:info+login:avatar&state=yandex-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          yandex = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "strava") {
          var url =
            "https://www.strava.com/oauth/authorize?client_id=114434&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&state=strava-TheColors&scope=read,read_all,profile:read_all,activity:read_all,activity:read&state=strava-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          strava = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "zoho") {
          var url =
            "https://accounts.zoho.com/oauth/v2/auth?response_type=code&client_id=1000.4JZYN86CALWXC2E8QWEN22ELM3TCGR&scope=AaaServer.profile.Read&redirect_uri=https://agar.id.vn/Login/login.html&prompt=consent&state=zoho-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          zoho = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "ebay") {
          var url =
            "https://auth.ebay.com/oauth2/authorize?client_id=binhnguy-AGARSOLO-PRD-1dd74af21-9f77bdf1&response_type=code&redirect_uri=binh_nguyen-binhnguy-AGARSO-jothg&scope=https://api.ebay.com/oauth/api_scope/commerce.identity.readonly&state=ebay-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          ebay = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        } else if (dame == "quickbooks") {
          var url =
            "https://appcenter.intuit.com/connect/oauth2?client_id=AB4cQnOsL7tkgOvE0SSS7XZ0wdRZPNqVxOD8j603zHncPf4g5O&response_type=code&scope=com.intuit.quickbooks.accounting+openid+email+profile&redirect_uri=https://agar.id.vn/Login/login.html&state=quickbooks-TheColors";
          var width = 600;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          quickbooks = window.open(
            url,
            "EmbeddedPopup",
            "width=" +
              width +
              ",height=" +
              height +
              ",left=" +
              left +
              ",top=" +
              top
          );
        }
      }

      function openYANJILoginPopup() {
        var url =
          "https://gitlab.com/oauth/authorize?client_id=2117c66f47cbedf94f8ddc65a2ce603938057f36eec33468dd0eca3211bc217c&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&scope=api+read_api&state=Gitlab-TheColors";
        var width = 600;
        var height = 600;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height) / 2;
        popgitlab = window.open(
          url,
          "EmbeddedPopup",
          "width=" +
            width +
            ",height=" +
            height +
            ",left=" +
            left +
            ",top=" +
            top
        );
      }

      var popup;
      var popgitlab;
      function openGitHubLoginPopup() {
        var url =
          "https://github.com/login/oauth/authorize?client_id=36132e6f32fa59d85154&redirect_uri=https://agar.id.vn/Login/login.html&scope=repo,user&state=Github-TheColors";
        var width = 600;
        var height = 600;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height) / 2;
        popup = window.open(
          url,
          "GitHubLoginPopup",
          "width=" +
            width +
            ",height=" +
            height +
            ",left=" +
            left +
            ",top=" +
            top
        );
      }
      function openGitlabLoginPopup() {
        var url =
          "https://gitlab.com/oauth/authorize?client_id=2117c66f47cbedf94f8ddc65a2ce603938057f36eec33468dd0eca3211bc217c&redirect_uri=https://agar.id.vn/Login/login.html&response_type=code&scope=api+read_api&state=Gitlab-TheColors";
        var width = 600;
        var height = 600;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height) / 2;
        popgitlab = window.open(
          url,
          "EmbeddedPopupGitlab",
          "width=" +
            width +
            ",height=" +
            height +
            ",left=" +
            left +
            ",top=" +
            top
        );
      }
      var cailon;
      function getTwitchUserID(token) {
        fetch("https://api.twitch.tv/helix/users", {
          headers: {
            Authorization: "Bearer " + token,
            "Client-ID": "qdt8a9lzfgfswr1485wn9y1d9m06bc",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            avatarUrl = data.data[0].profile_image_url;
            instance.SendMessage(
              "Main Camera",
              "setTwitch",
              token + "," + avatarUrl + "," + "(twitch)"
            );
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Lỗi khi lấy thông tin người dùng từ Twitch:", error);
          });
      }
      function getGitHubUserID(authcode) {
        const url = new URL("https://testlogin.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcode);
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            // Xử lý dữ liệu từ Worker ở đây
            fetch("https://api.github.com/user", {
              headers: {
                Authorization: `Bearer ` + data,
              },
            })
              .then((response) => response.json())
              .then((data2) => {
                const userId = data2.id;
                const name = data2.name;
                const avatarurl = data2.avatar_url;
                instance.SendMessage(
                  "Main Camera",
                  "setgithub",
                  name + "," + "(Github)" + userId.toString() + "," + avatarurl
                );
              })
              .catch((error) => {
                instance.SendMessage("Main Camera", "tatuser");
                console.error("Error retrieving user ID:", error);
              });
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getdropboxUserID(authcodene) {
        const url = new URL(
          "https://loginlinkedin.nguyenchibinh113.workers.dev"
        );
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setdropbox", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getyahoouserid(authcodene) {
        const url = new URL("https://testlannua.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setyahoo", data);
            console.log(data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getmicrouserid(authcodene) {
        const url = new URL("https://trumlon.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setmicro", data);
            console.log(data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getzalouserid(authcodene) {
        const url = new URL("https://zalo.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setzalo", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function gettiktokuserid(authcodene) {
        const url = new URL("https://tiktok.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            data = data.replace(/"/g, "");
            console.log(data);
            console.log(decodeURIComponent(data));
            instance.SendMessage("Main Camera", "settiktok", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function generateOAuthSignature(
        httpMethod,
        requestUrl,
        params,
        consumerSecret
      ) {
        const baseString =
          httpMethod +
          "&" +
          encodeURIComponent(requestUrl) +
          "&" +
          encodeURIComponent(params);
        const signature = CryptoJS.HmacSHA1(
          baseString,
          consumerSecret + "&" + secrettoken
        );
        return CryptoJS.enc.Base64.stringify(signature);
      }
      function generateNonce() {
        return (
          Math.random().toString(36).substring(2) + Date.now().toString(36)
        );
      }
      function gettelegramuserid(data) {
        instance.SendMessage("Main Camera", "settelegram", data);
      }
      function base64UrlDecode(base64Url) {
        let base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
        while (base64.length % 4) {
          base64 += "=";
        }
        return atob(base64);
      }

      function decodeIdToken(idToken) {
        const parts = idToken.split(".");
        const payload = JSON.parse(base64UrlDecode(parts[1]));
        return payload;
      }
      function getquickbooksuserid(auth) {
        const url = new URL("https://intuit.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setquickbooks", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getebayuserid(auth) {
        const url = new URL("https://ebay.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setebay", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getzohouserid(auth) {
        const url = new URL("https://zoho.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setzoho", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getstravauserid(auth) {
        const url = "https://www.strava.com/api/v3/oauth/token";
        const clientId = "114434";
        const clientSecret = "9414ec1cad6a5026b60b892894d173ce90193d51";
        const code = auth;
        const grantType = "authorization_code";

        const data = new URLSearchParams();
        data.append("client_id", clientId);
        data.append("client_secret", clientSecret);
        data.append("code", code);
        data.append("grant_type", grantType);

        fetch(url, {
          method: "POST",
          body: data,
        })
          .then((response) => response.json())
          .then((data) => {
            // Xử lý dữ liệu phản hồi từ Strava
            let K =
              data.athlete.firstname +
              " " +
              data.athlete.lastname +
              ",(Strava)" +
              data.athlete.id +
              "," +
              data.athlete.profile_medium;
            K = K.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setstrava", K);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log(error);
          });
      }
      function getyandexuserid(auth) {
        const url = new URL("https://yandex.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setyandex", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getatlassianuserid(auth) {
        const getToken = async () => {
          const tokenUrl = "https://auth.atlassian.com/oauth/token";

          const requestBody = {
            grant_type: "authorization_code",
            client_id: "JWvVCpxtmpgOoquauyjCrz1LBOHGsmVC",
            client_secret:
              "ATOAvnIGNMQeLfhPxSCL1eNLQVoMi3I0rqki12wlOCEiGjHVl34S73keMVPKtXmhVSHI8C6FC626",
            code: auth,
            redirect_uri: "https://agar.id.vn/Login/login.html",
          };

          try {
            const response = await fetch(tokenUrl, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(requestBody),
            });

            if (response.ok) {
              const data = await response.json();
              const accessToken = data.access_token;
              // Sử dụng accessToken để thực hiện các yêu cầu API khác
              fetch("https://api.atlassian.com/me", {
                headers: {
                  Authorization: `Bearer ${accessToken}`,
                  "Content-Type": "application/json",
                },
              })
                .then((response) => response.json())
                .then((data) => {
                  // Xử lý dữ liệu thông tin người dùng ở đây
                  console.log(data);
                  instance.SendMessage(
                    "Main Camera",
                    "setatlassian",
                    data.name +
                      ",(Atlassian)" +
                      data.account_id +
                      "," +
                      data.picture
                  );
                })
                .catch((error) => {
                  instance.SendMessage("Main Camera", "tatuser");
                  console.log("Lỗi:", error);
                });
            } else {
              instance.SendMessage("Main Camera", "tatuser");
              console.log("Không thể lấy token từ mã xác thực.");
            }
          } catch (error) {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Lỗi khi gọi API:", error);
          }
        };
        getToken();
      }
      function getimguruserid(info) {
        let K = info.split(",");
        instance.SendMessage(
          "Main Camera",
          "setmailchimp",
          K[0] + ",(Imgur)" + K[1] + ",null"
        );
      }
      function getmailchimpuserid(auth) {
        const url = new URL("https://mailchimp.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setmailchimp", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getmirouserid(auth) {
        const url = new URL("https://miro.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setmiro", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getxerouserid(auth) {
        const url = new URL("https://xero.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            const K = decodeIdToken(data);
            const B = K.name + ",(Xero)" + K.sub + ",null";
            console.log(B);
            instance.SendMessage("Main Camera", "setxero", B);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getcapsuleuserid(auth) {
        const clientId = "14qiasym25dl5";
        const clientSecret =
          "2mxuofim6f4gjmbzh4e2s3nmwkapqnr98bgt7tbqzs4wizmq1r";
        const oauthCode = auth;

        const getToken = async () => {
          const url = "https://api.capsulecrm.com/oauth/token";

          const data = new URLSearchParams();
          data.append("client_id", clientId);
          data.append("client_secret", clientSecret);
          data.append("code", oauthCode);
          data.append("grant_type", "authorization_code");

          const response = await fetch(url, {
            method: "POST",
            body: data,
          });

          if (response.ok) {
            const tokenData = await response.json();
            const token = tokenData.access_token;
            return token;
          } else {
            throw new Error("Failed to fetch token");
          }
        };

        // Gọi hàm getToken và xử lý kết quả
        getToken()
          .then((token) => {
            const getUserInfo = async () => {
              const url = "https://api.capsulecrm.com/api/v2/users";

              const response = await fetch(url, {
                headers: {
                  Authorization: `Bearer ${token}`,
                },
              });

              if (response.ok) {
                const userInfo = await response.json();
                return userInfo;
              } else {
                instance.SendMessage("Main Camera", "tatuser");
                throw new Error("Failed to fetch user info");
              }
            };

            // Gọi hàm getUserInfo và xử lý kết quả
            getUserInfo()
              .then((userInfo) => {
                const K =
                  userInfo.users[0].name +
                  ",(Capsule)" +
                  userInfo.users[0].party.id +
                  ",null";
                instance.SendMessage("Main Camera", "setcapsule", K);
              })
              .catch((error) => {
                instance.SendMessage("Main Camera", "tatuser");
                console.log("Error:", error);
              });
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getciscouserid(auth) {
        const url = new URL("https://ciscon.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            const hehe = decodeIdToken(data);
            const name = hehe.name;
            const id = hehe.sub;
            instance.SendMessage(
              "Main Camera",
              "setcisco",
              name + ",(Cisco)" + id + ",null"
            );
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getsquareuserid(auth) {
        const url = new URL("https://squarespace.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", auth);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            //  instance.SendMessage("Main Camera", "setinstagram", data);
          })
          .catch((error) => {
            //  instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getwebexuserid(token) {
        const accessToken = token;

        fetch("https://api.ciscospark.com/v1/people/me", {
          headers: {
            Authorization: "Bearer " + accessToken,
          },
        })
          .then((response) => response.json())
          .then((data) => {
            // Xử lý dữ liệu người dùng (userinfo) ở đây
            instance.SendMessage(
              "Main Camera",
              "setwebex",
              JSON.stringify(data.displayName).replace(/"/g, "") +
                ",(Webex)" +
                JSON.stringify(data.id).replace(/"/g, "") +
                ",null"
            );
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getreddituserid(auth) {
        const clientId = "iqXaDvmAAt_fybb3Ith5ow";
        const clientSecret = "i1yV_HUULkV-7j_ETRTQRlaZmxthYg";
        const redirectUri = "https://agar.id.vn/Login/login.html";
        const code = auth;

        const getToken = async () => {
          const url = "https://www.reddit.com/api/v1/access_token";
          const basicAuth = btoa(`${clientId}:${clientSecret}`);
          const body = new URLSearchParams({
            grant_type: "authorization_code",
            code: code,
            redirect_uri: redirectUri,
          });

          const response = await fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
              Authorization: `Basic ${basicAuth}`,
            },
            body: body,
          });

          const data = await response.json();
          if (response.ok) {
            const accessToken = data.access_token;
            return accessToken;
          } else {
            instance.SendMessage("Main Camera", "tatuser");
            throw new Error(data.error);
          }
        };

        // Gọi hàm để lấy access token
        getToken()
          .then((token) => {
            const fetchUserinfo = async (accessToken) => {
              const url = "https://oauth.reddit.com/api/v1/me";

              try {
                const response = await fetch(url, {
                  headers: {
                    Authorization: `Bearer ${accessToken}`,
                    "User-Agent": "AGAR SOLO/1.0", // Thay "MyApp/1.0" bằng tên ứng dụng của bạn
                  },
                });

                if (!response.ok) {
                  instance.SendMessage("Main Camera", "tatuser");
                  throw new Error("Lỗi khi gọi API");
                }

                const data = await response.json();
                return data;
              } catch (error) {
                instance.SendMessage("Main Camera", "tatuser");
                console.log(error);
              }
            };

            fetchUserinfo(token)
              .then((data) => {
                instance.SendMessage(
                  "Main Camera",
                  "setreddit",
                  data.name.replace(/"/g, "") +
                    ",(Reddit)" +
                    data.id.replace(/"/g, "") +
                    "," +
                    data.icon_img
                      .substring(
                        0,
                        data.icon_img.indexOf(".png") + ".png".length
                      )
                      .replace(/"/g, "")
                );
                // Xử lý dữ liệu người dùng
              })
              .catch((error) => {
                instance.SendMessage("Main Camera", "tatuser");
                console.log(error);
              });
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Lỗi khi lấy access token:", error);
          });
      }
      function getinstauserid(authcodene) {
        const url = new URL("https://instagram.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setinstagram", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getkakaouserid(authcodene) {
        const clientId = "7d8c067dbfb60b6a6646c7fd0d405d67";
        const clientSecret = "vmgzImHsoC6DJJa7WjTn9vDY42ltLE99";
        const redirectUri = "https://agar.id.vn/Login/login.html";
        const code = authcodene; // Thay thế bằng mã ủy quyền (authorization code) nhận được từ KakaoTalk OAuth

        const url = "https://kauth.kakao.com/oauth/token";

        const body = new URLSearchParams();
        body.append("grant_type", "authorization_code");
        body.append("client_id", clientId);
        body.append("client_secret", clientSecret);
        body.append("redirect_uri", redirectUri);
        body.append("code", code);

        fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded;charset=utf-8",
          },
          body: body,
        })
          .then((response) => response.json())
          .then((data) => {
            // Xử lý dữ liệu trả về từ KakaoTalk OAuth
            const accessToken = data.access_token; // Thay thế bằng mã thông báo (access token) của bạn
            const url = "https://kapi.kakao.com/v2/user/me";

            fetch(url, {
              method: "GET",
              headers: {
                Authorization: `Bearer ${accessToken}`,
                "Content-Type":
                  "application/x-www-form-urlencoded;charset=utf-8",
              },
            })
              .then((response) => response.json())
              .then((data) => {
                // Xử lý dữ liệu người dùng từ KakaoTalk API
                var K = (
                  data.kakao_account.profile.nickname +
                  ",(KakaoTalk)" +
                  data.id +
                  "," +
                  data.properties.profile_image
                ).replace(/"/g, "");
                instance.SendMessage("Main Camera", "setkakaotalk", K);
              })
              .catch((error) => {
                // Xử lý lỗi nếu có
                instance.SendMessage("Main Camera", "tatuser");
                console.log("Error:", error);
              });
          })
          .catch((error) => {
            // Xử lý lỗi nếu có
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getpinuserid(authcodene) {
        const url = new URL("https://pinterest.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setpinterest", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getadobeuserid(authcodene) {
        const clientId = "f4e8dc6f579b48ad823515b7a12f5309";
        const clientSecret = "p8e-czDwD5IT6bCYrrb1O_loRlN33ahs3ROa";
        const redirectUri = "https://agar.id.vn/Login/login.html";
        const code = authcodene;

        const url = "https://ims-na1.adobelogin.com/ims/token/v1";

        const body = new URLSearchParams();
        body.append("client_id", clientId);
        body.append("client_secret", clientSecret);
        body.append("grant_type", "authorization_code");
        body.append("code", code);
        body.append("redirect_uri", redirectUri);

        fetch(url, {
          method: "POST",
          body: body,
        })
          .then((response) => response.json())
          .then((data) => {
            const accessToken = decodeURIComponent(data.access_token);
            const url = `https://ims-na1.adobelogin.com/ims/userinfo/v2?client_id=${clientId}`;

            fetch(url, {
              method: "GET",
              headers: {
                Authorization: `Bearer ${accessToken}`,
              },
            })
              .then((response) => response.json())
              .then((data) => {
                // Xử lý dữ liệu phản hồi ở đây
                var K = data.name + ",(Adobe)" + data.sub + ",null";
                instance.SendMessage("Main Camera", "setadobe", K);
              })
              .catch((error) => {
                // Xử lý lỗi tại đây
                instance.SendMessage("Main Camera", "tatuser");
                console.log(error);
              });
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            // Xử lý lỗi tại đây
            console.log(error);
          });
      }
      function getVKuserid(authcodene) {
        const url = new URL("https://vk.nguyenchibinh113.workers.dev");
        url.searchParams.set("code", authcodene);
        fetch(url)
          .then((response) => response.json())
          .then((data) => {
            var K =
              JSON.stringify(data.response[0].first_name) +
              " " +
              JSON.stringify(data.response[0].last_name) +
              ",(VK)" +
              JSON.stringify(data.response[0].id) +
              "," +
              JSON.stringify(data.response[0].photo_200);
            K = K.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setVK", K);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getflickruserid(data) {
        const token = data.split(",")[0].trim();
        veri = data.split(",")[1].trim();
        oauth_nonce = generateNonce();
        oauth_timestam = Math.floor(Date.now() / 1000);
        consum = "698eed3be339b3b34e0cbafa51206b69";
        method = "HMAC-SHA1";
        version = "1.0";
        request = "https://www.flickr.com/services/oauth/access_token";
        http = "GET";
        param =
          "oauth_consumer_key=" +
          encodeURIComponent(consum) +
          "&oauth_nonce=" +
          encodeURIComponent(oauth_nonce) +
          "&oauth_signature_method=" +
          "HMAC-SHA1" +
          "&oauth_timestamp=" +
          encodeURIComponent(oauth_timestam) +
          "&oauth_token=" +
          encodeURIComponent(token) +
          "&oauth_verifier=" +
          veri +
          "&oauth_version=" +
          "1.0";
        const signature = generateOAuthSignature(
          http,
          request,
          param,
          "2998c0adc3e47067"
        );
        const t =
          request +
          "?" +
          param +
          "&oauth_signature=" +
          encodeURIComponent(signature);
        const url = new URL("https://flickr.nguyenchibinh113.workers.dev");
        url.searchParams.set("url", t);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            data = data.replace(/"/g, "");
            const params = data.split("&");

            // Duyệt qua từng phần tử và tìm giá trị của "fullname" và "user_nsid"
            params.forEach((param) => {
              const [key, value] = param.split("=");
              if (key === "fullname") {
                fullname = decodeURIComponent(value); // Giải mã giá trị
              } else if (key === "user_nsid") {
                user_nsid = decodeURIComponent(value); // Giải mã giá trị
              }
            });
            console.log("Fullname:", fullname);
            console.log("User NSID:", user_nsid);
            instance.SendMessage(
              "Main Camera",
              "setflickr",
              fullname + "," + "(Flickr)" + user_nsid.toString() + ",null"
            );
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getgoogleuserid(token) {
        var url =
          "https://www.googleapis.com/oauth2/v1/userinfo?access_token=" + token;
        fetch(url)
          .then((response) => response.json())
          .then((data) => {
            instance.SendMessage(
              "Main Camera",
              "setgoogle",
              data.name.replace(/"/g, "") +
                ",(Google)" +
                data.id.replace(/"/g, "") +
                "," +
                data.picture.replace(/"/g, "")
            );
          })
          .catch((error) => {
            // instance.SendMessage("Main Camera", "tatuser");
            console.log(
              "Lỗi khi lấy thông tin người dùng từ URL userinfo.profile: ",
              error
            );
          });
      }
      function gettumblruserid(authcodene) {
        const clientId = "for9e5uubwTSM59CfRKiJbLKXfjtdv2v07sOHECvp4bwTxGstm";
        const clientSecret =
          "EBxTEPASmNp39FyqNoQSrdrbLJJXDn23xJyWt99SzKtqaWyqC5";
        const redirectUri = "https://agar.id.vn/Login/login.html";

        const getToken = async () => {
          const url = "https://api.tumblr.com/v2/oauth2/token";
          const params = new URLSearchParams();
          params.append("grant_type", "authorization_code");
          params.append("code", authcodene);
          params.append("client_id", clientId);
          params.append("client_secret", clientSecret);
          params.append("redirect_uri", redirectUri);

          try {
            const response = await fetch(url, {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: params.toString(),
            });

            if (response.ok) {
              const data = await response.json();
              const accessToken = data.access_token;
              return accessToken;
            } else {
              instance.SendMessage("Main Camera", "tatuser");
              throw new Error("Failed to fetch access token");
            }
          } catch (error) {
            instance.SendMessage("Main Camera", "tatuser");
            console.log(error);
          }
        };

        // Sử dụng hàm getToken() để lấy Access Token
        getToken().then((accessToken) => {
          console.log("Access Token:", accessToken);
          fetch("https://api.tumblr.com/v2/user/info", {
            headers: {
              Authorization: `Bearer ${accessToken}`,
            },
          })
            .then((response) => response.json())
            .then((data) => {
              var K =
                data.response.user.name +
                ",(Tumblr)" +
                data.response.user.blogs[0].uuid +
                "," +
                data.response.user.blogs[0].avatar[0].url;
              instance.SendMessage("Main Camera", "settumblr", K);
            })
            .catch((error) => {
              instance.SendMessage("Main Camera", "tatuser");
              console.log("Error:", error);
            });
        });
      }
      function getasanauserid(authcodene) {
        const url = new URL("https://asana.nguyenchibinh113.workers.dev");
        url.searchParams.set(
          "authcode",
          authcodene.replace("%2F", "/").replace("%3A", ":")
        );

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setasana", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getvimeouserid(authcodene) {
        const accessToken = authcodene;

        const userEndpoint = "https://api.vimeo.com/me";

        fetch(userEndpoint, {
          headers: {
            Authorization: `Bearer ${accessToken}`,
          },
        })
          .then((response) => response.json())
          .then((data) => {
            data2 =
              data.name +
              ",(Vimeo)" +
              data.uri.split("/").pop() +
              "," +
              data.pictures.base_link;
            instance.SendMessage("Main Camera", "setvimeo", data2);
            // Thực hiện các thao tác tiếp theo với thông tin người dùng
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Lỗi khi lấy thông tin người dùng:", error);
          });
      }
      function getdribbbleuserid(authcodene) {
        const url = new URL("https://dribble.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setdribbble", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          });
      }
      function getlineuserid(authcodene) {
        const clientId = "2000654210";
        const clientSecret = "67ae934550211344595ca5ddfe6a63e0";
        const redirectUri = "https://agar.id.vn/Login/login.html";
        const code = authcodene;

        const getToken = async () => {
          const url = "https://api.line.me/oauth2/v2.1/token";
          const params = new URLSearchParams();
          params.append("grant_type", "authorization_code");
          params.append("client_id", clientId);
          params.append("client_secret", clientSecret);
          params.append("redirect_uri", redirectUri);
          params.append("code", code);

          try {
            const response = await fetch(url, {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: params,
            });

            if (response.ok) {
              const data = await response.json();
              const accessToken = data.access_token;
              const getUserInfo = async () => {
                const url = "https://api.line.me/v2/profile";
                try {
                  const response = await fetch(url, {
                    headers: {
                      Authorization: `Bearer ${accessToken}`,
                    },
                  });

                  if (response.ok) {
                    const data = await response.json();
                    console.log("User Info:", data);
                    instance.SendMessage(
                      "Main Camera",
                      "setline",
                      data.displayName + ",(Line)" + data.userId
                    ) + ",null";
                  } else {
                    instance.SendMessage("Main Camera", "tatuser");
                    console.log(
                      "Failed to get user info:",
                      response.statusText
                    );
                  }
                } catch (error) {
                  instance.SendMessage("Main Camera", "tatuser");
                  console.log("Error:", error);
                }
              };
              getUserInfo();
            } else {
              instance.SendMessage("Main Camera", "tatuser");
              console.log("Failed to get access token:", response.statusText);
            }
          } catch (error) {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error:", error);
          }
        };

        getToken();
      }
      function getnotionuserid(authcodene) {
        const url = new URL("https://notion.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);
        const clientId = "d2a6b35c-3182-433c-93d1-25a09ebd7276";
        const clientSecret =
          "secret_xBfvAnUdrclKGRrP4aI9as7rbFHfpCWCxjdD2gvHyv2";

        // encode in base 64
        const encoded = btoa(`${clientId}:${clientSecret}`);
        url.searchParams.set("end", encoded);
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setnotion", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getslackuserid(authcodene) {
        const clientId = "5850488718596.5850498155444";
        const clientSecret = "6a0d6aa4bacaa900b6679d12c9a11894";
        const redirectUri = "https://agar.id.vn/Login/login.html";
        const oauthCode = authcodene;

        const apiUrl = "https://slack.com/api/openid.connect.token";

        const fetchAccessToken = () => {
          return fetch(apiUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: `client_id=${clientId}&client_secret=${clientSecret}&redirect_uri=${redirectUri}&code=${oauthCode}`,
          })
            .then((response) => response.json())
            .then((data) => {
              if (data.ok) {
                const accessToken = data.access_token;
                return accessToken;
              } else {
                throw new Error(data.error);
              }
            });
        };
        fetchAccessToken()
          .then((accessToken) => {
            const url = new URL("https://slack.nguyenchibinh113.workers.dev");
            url.searchParams.set("authcode", decodeURIComponent(accessToken));

            fetch(url)
              .then((response) => response.text())
              .then((data) => {
                console.log(data);
                data = data.replace(/"/g, "");
                instance.SendMessage("Main Camera", "setslack", data);
              })
              .catch((error) => {
                instance.SendMessage("Main Camera", "tatuser");
                console.error("Error:", error);
              });
          })
          .catch((error) => {
            console.error("Error:", error.message);
          });
      }
      function getwordpressuserid(authcodene) {
        const url = new URL("https://wordpress.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setwordpress", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getspotifyuserid(authcodene) {
        const accessToken = authcodene;

        fetch("https://api.spotify.com/v1/me", {
          headers: {
            Authorization: "Bearer " + accessToken,
          },
        })
          .then((response) => response.json())
          .then((data) => {
            // Xử lý dữ liệu người dùng từ thành công của cuộc gọi API
            var K =
              data.display_name +
              ",(spotify)" +
              data.id +
              "," +
              data.images[1].url;
            console.log(K);
            instance.SendMessage("Main Camera", "setspotify", K);
          })
          .catch((error) => {
            // Xử lý lỗi nếu có
            instance.SendMessage("Main Camera", "tatuser");
            console.error(error);
          });
      }
      function getlinkedlnuserid(authcodene) {
        const url = new URL("https://link.nguyenchibinh113.workers.dev");
        url.searchParams.set("authcode", authcodene);

        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            data = data.replace(/"/g, "");
            instance.SendMessage("Main Camera", "setlinkedln", data);
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getamazonuserid(authcodene) {
        const clientId =
          "amzn1.application-oa2-client.3514ff94f77246459a1984a1b28b29f8";
        const clientSecret =
          "amzn1.oa2-cs.v1.d58fdd095d47bd7ec40f7d08597d0b7ce4ea028ffe4c11fb4b5a68c4652f5dff";
        const redirectUri = "https://agar.id.vn/Login/login.html";

        const getToken = async () => {
          const url = "https://api.amazon.com/auth/o2/token";
          const params = new URLSearchParams();
          params.append("grant_type", "authorization_code");
          params.append("code", authcodene);
          params.append("client_id", clientId);
          params.append("client_secret", clientSecret);
          params.append("redirect_uri", redirectUri);

          try {
            const response = await fetch(url, {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: params.toString(),
            });

            if (response.ok) {
              const data = await response.json();
              const accessToken = data.access_token;
              return accessToken;
            } else {
              instance.SendMessage("Main Camera", "tatuser");
              throw new Error("Failed to fetch access token");
            }
          } catch (error) {
            instance.SendMessage("Main Camera", "tatuser");
            console.error(error);
          }
        };

        // Sử dụng hàm getToken() để lấy Access Token
        getToken()
          .then((accessToken) => {
            console.log("Access Token:", accessToken);
            // Thực hiện các thao tác khác với Access Token

            fetch("https://api.amazon.com/user/profile", {
              headers: {
                Authorization: `Bearer ${accessToken}`,
              },
            })
              .then((response) => response.json())
              .then((data) => {
                instance.SendMessage(
                  "Main Camera",
                  "setamazon",
                  data.name + "," + "(amazon)" + data.user_id + "," + "null"
                );
              })
              .catch((error) => {
                instance.SendMessage("Main Camera", "tatuser");
                console.error("Error:", error);
              });
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Error:", error);
          });
      }
      function getGitLabUserID(cocode) {
        const clientId =
          "2117c66f47cbedf94f8ddc65a2ce603938057f36eec33468dd0eca3211bc217c";
        const clientSecret =
          "a81e1a18edf1ed6f4dad066b92a03cdc9acba5df3c90deca5b5d7071b189c199";
        const redirectUri = "https://agar.id.vn/Login/login.html";

        const requestData = {
          client_id: clientId,
          client_secret: clientSecret,
          code: cocode,
          grant_type: "authorization_code",
          redirect_uri: redirectUri,
        };

        const requestUrl = "https://gitlab.com/oauth/token";

        fetch(requestUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(requestData),
        })
          .then((response) => response.json())
          .then((data) => {
            const accessToken = data.access_token;
            // Tiếp tục xử lý với Access Token ở đây
            // Gửi yêu cầu API để lấy thông tin người dùng từ GitLab
            fetch("https://gitlab.com/api/v4/user", {
              headers: {
                Authorization: `Bearer ` + accessToken,
              },
            })
              .then((response) => response.json())
              .then((data) => {
                const userId = data.id;

                instance.SendMessage(
                  "Main Camera",
                  "setgitlab",
                  data.username +
                    "," +
                    "(Gitlab)" +
                    userId.toString() +
                    "," +
                    data.avatar_url
                );
              })
              .catch((error) => {
                instance.SendMessage("Main Camera", "tatuser");
                console.error("Failed to fetch user information", error);
              });
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.error("Lỗi khi yêu cầu Access Token:", error);
          });
      }
      function getbitbucketUserID(codetoken) {
        // Gửi yêu cầu API để lấy thông tin người dùng từ GitLab
        fetch("https://api.bitbucket.org/2.0/user", {
          headers: {
            Authorization: "Bearer " + codetoken,
          },
        })
          .then((response) => response.json())
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Lỗi khi lấy thông tin người dùng:", error);
          })
          .then((data) => {
            // Lấy User ID từ kết quả
            const userID = data.uuid;

            instance.SendMessage(
              "Main Camera",
              "setbitbutket",
              data.nickname +
                "," +
                "(Bitbucket)" +
                userID.toString() +
                "," +
                data.links.avatar.href
            );
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Lỗi khi lấy thông tin người dùng:", error);
          });
      }
      function getdiscordUserID(codetoken) {
        fetch("https://discord.com/api/v10/users/@me", {
          headers: {
            Authorization: `Bearer ` + codetoken,
          },
        })
          .then((response) => response.json())
          .then((data) => {
            console.log("User ID:", data.id);
            console.log("User name:", data.username);
            console.log(
              "User url:",
              "https://cdn.discordapp.com/avatars/" +
                data.id +
                "/" +
                data.avatar +
                ".png"
            );
            var urldai =
              "https://cdn.discordapp.com/avatars/" +
              data.id +
              "/" +
              data.avatar +
              ".png";
            instance.SendMessage(
              "Main Camera",
              "setdiscord",
              data.username + "," + "(Discord)" + data.id + "," + urldai
            );
          })
          .catch((error) => {
            instance.SendMessage("Main Camera", "tatuser");
            console.log("Error retrieving user info:", error);
          });
      }

      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      // var fullscreenButton = document.querySelector("#unity-fullscreen-button");
      var warningBanner = document.querySelector("#unity-warning");

      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length
            ? "block"
            : "none";
        }
        var div = document.createElement("div");
        div.innerHTML = msg;
        warningBanner.appendChild(div);
        if (type == "error") div.style = "background: red; padding: 10px;";
        else {
          if (type == "warning")
            div.style = "background: yellow; padding: 10px;";
          setTimeout(function () {
            warningBanner.removeChild(div);
            updateBannerVisibility();
          }, 5000);
        }
        updateBannerVisibility();
      }

      var buildUrl = "Build";
      var loaderUrl = buildUrl + "/Game.loader.js";
      var config = {
        dataUrl: buildUrl + "/Game.data.br",
        frameworkUrl: buildUrl + "/Game.framework.js.br",
        codeUrl: buildUrl + "/Game.wasm.br",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "IO",
        productVersion: "1.0",
        showBanner: unityShowBanner,
      };

      // By default Unity keeps WebGL canvas render target size matched with
      // the DOM size of the canvas element (scaled by window.devicePixelRatio)
      // Set this to false if you want to decouple this synchronization from
      // happening inside the engine, and you would instead like to size up
      // the canvas DOM size and WebGL render target sizes yourself.
      // config.matchWebGLToCanvasSize = false;

      // Desktop style: Render the game canvas in a window that can be maximized to fullscreen:

      canvas.style.width = "1154px";
      canvas.style.height = "649px";
      loadingBar.style.display = "block";

      var script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        const channel = new BroadcastChannel("myChannel");
        channel.onmessage = function (event) {
          instance.SendMessage("Main Camera", "hienloadgoogle");
          urltwitter.searchParams.set("authcode", event.data);
          console.log(event.data);
          fetch(urltwitter)
            .then((response) => response.text())
            .then((data) => {
              console.log(data);
              data = data.replace(/"/g, "");
              instance.SendMessage("Main Camera", "settwitter", data);
            })
            .catch((error) => {
              instance.SendMessage("Main Camera", "tatuser");
              console.log("Error:", error);
            });
        };

        window.addEventListener("message", function (event) {
          console.log(event.data + " " + event.origin);
          var receivedMessage = event.data;
          if (event.origin === "https://agar.id.vn") {
            if (receivedMessage.includes("Twitch")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getTwitchUserID(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(Github)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getGitHubUserID(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(Gitlab)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getGitLabUserID(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(bitbucket)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getbitbucketUserID(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(discord)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getdiscordUserID(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(dropbox)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getdropboxUserID(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(yahoo)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getyahoouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(Microsoft)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getmicrouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(zalo)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getzalouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(amazon)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getamazonuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(tiktok)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              gettiktokuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(linkedln)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getlinkedlnuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(spotify)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getspotifyuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(wordpress)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getwordpressuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(slack)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getslackuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(notion)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getnotionuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(line)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getlineuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(dribbble)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getdribbbleuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(vimeo)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getvimeouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(asana)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getasanauserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(tumblr)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              gettumblruserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(Google)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getgoogleuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(flickr)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getflickruserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(VKontakte)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getVKuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(Adobe)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getadobeuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(Pinterest)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getpinuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(kakaotalk)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getkakaouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(instagram)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getinstauserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(reddit)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              console.log(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
              getreddituserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(webex)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getwebexuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(squarespace)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getsquareuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(cisco)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getciscouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(capsule)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getcapsuleuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(xero)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getxerouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(miro)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getmirouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(mailchimp)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getmailchimpuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(imgur)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getimguruserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(atlassian)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getatlassianuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(yandex)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getyandexuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(strava)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getstravauserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(zoho)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getzohouserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(ebay)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getebayuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            } else if (receivedMessage.includes("(quickbooks)")) {
              instance.SendMessage("Main Camera", "hienloadgoogle");
              getquickbooksuserid(
                decodeURIComponent(
                  receivedMessage.substring(receivedMessage.indexOf(")") + 1)
                )
              );
            }
          } else if (event.origin === "https://oauth.telegram.org") {
            console.log("nhan telegram");
            instance.SendMessage("Main Camera", "hienloadgoogle");
            const jsonString = receivedMessage;
            const firstName = jsonString.match(/"first_name":"([^"]+)"/)[1];

            // Lấy giá trị last name
            const lastName = jsonString.match(/"last_name":"([^"]+)"/)[1];

            // Lấy giá trị id
            const id = parseInt(jsonString.match(/"id":(\d+)/)[1]);

            // Lấy giá trị photo URL
            const photoUrl = jsonString.match(/"photo_url":"([^"]+)"/)[1];
            gettelegramuserid(
              firstName + " " + lastName + ",(Telegram)" + id + "," + photoUrl
            );
          }
        });

        var browserWidth = window.innerWidth;
        var browserHeight = window.innerHeight;
        var browserRatio = browserWidth / browserHeight;
        var gameRatio = 1920 / 1080;

        var newWidth, newHeight;
        if (browserRatio > gameRatio) {
          newHeight = browserHeight;
          newWidth = browserHeight * gameRatio;
        } else {
          newWidth = browserWidth;
          newHeight = newWidth / gameRatio;
        }

        // Cập nhật kích thước của canvas
        canvas.style.width = (newWidth * 0.91).toString() + "px";
        canvas.style.height = (newHeight * 0.91).toString() + "px";

        createUnityInstance(canvas, config, (progress) => {
          progressBarFull.style.width = 100 * progress + "%";
        })
          .then((unityInstance) => {
            loadingBar.style.display = "none";
            instance = unityInstance;
            instance.SendMessage("Main Camera", "khoitaofb");
            // fullscreenButton.onclick = () => {
            //   unityInstance.SetFullscreen(1);
            // };
          })
          .catch((message) => {
            alert(message);
          });
      };
      document.body.appendChild(script);
    </script>
    <script
      src="https://forms.app/static/embed.js"
      type="text/javascript"
    ></script>
  </body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"
    integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
</html>
